(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/A+J":function(t,e,n){"use strict";n.r(e);var a=n("ZFEL"),r={name:"settings-tab",props:{icon:{type:String,default:null},text:{type:String,required:!0}}},i=n("KHd+"),s=Object(i.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-tab",[e("v-row",[e("v-col",{attrs:{cols:"4"}},[e("i",{class:this.icon})]),this._v(" "),e("v-col",{staticClass:"my-auto"},[this._v("\n            "+this._s(this.text)+"\n        ")])],1)],1)}),[],!1,null,null,null).exports,o=n("L2JU");function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={name:"pages-settings-content",components:{SettingsTab:s},data:function(){return{valid:!0,loading:!1,playerCount:{selected:null,available:[1,2,3,4,5]},availableJokerCount:[1,2,3,4],joker:{},points:{}}},mounted:function(){var t=this;this.updateStoredData(),Echo.channel("Game.".concat(this.getCurrentGameId,".Settings")).listen(".game.updated",(function(e){t.$store.dispatch("formatPusherData",e),t.updateStoredData()}))},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.c)(["getCurrentGameId","getCurrentGamePlayerCount","getGameJoker","getGamePointSettings","isGamemaster"])),methods:{updateStoredData:function(){this.playerCount.selected=this.getCurrentGamePlayerCount,this.points=this.getGamePointSettings,this.joker=this.getGameJoker},updateGameSettings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;this.loading=!0;var a={};if(e.includes("joker.")){a=[];for(var r=0,i=Object.entries(this.joker);r<i.length;r++){var s=l(i[r],2),o=(s[0],s[1]);a.push({id:o.id,count:o.count,active:!!o.value})}}else a[e]="boolean"==typeof n?!!n:n.toString();this.$store.dispatch("updateGameSettings",a).then((function(){t.loading=!1}))}}},f=Object(i.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",[n("v-tabs",{attrs:{vertical:""}},[n("settings-tab",{attrs:{icon:"fas fa-2x fa-cog",text:t.$t("settings.tabs.general.tab")}}),t._v(" "),n("settings-tab",{attrs:{icon:"fas fa-2x fa-gamepad",text:t.$t("settings.tabs.gameplay.tab")}}),t._v(" "),n("settings-tab",{attrs:{icon:"fas fa-2x fa-hat-wizard",text:t.$t("settings.tabs.joker.tab")}}),t._v(" "),n("v-tab-item",{staticClass:"mx-10"},[n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"px-0"},[n("v-select",{attrs:{items:t.playerCount.available,label:t.$t("settings.tabs.general.content.playerCount.label"),hint:t.$t("settings.tabs.general.content.playerCount.hint"),disabled:!t.isGamemaster,"persistent-hint":"",outlined:""},on:{change:function(e){return t.updateGameSettings("player_count",t.playerCount.selected)}},model:{value:t.playerCount.selected,callback:function(e){t.$set(t.playerCount,"selected",e)},expression:"playerCount.selected"}})],1)],1)],1),t._v(" "),n("v-tab-item",{staticClass:"mx-10"},[n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"px-0"},[n("v-text-field",{attrs:{type:"number",label:t.$t("settings.tabs.gameplay.content.correctAnswerPoints.label"),disabled:!t.isGamemaster},on:{change:function(e){return t.updateGameSettings("correct_points",t.points.correctAnswer)}},model:{value:t.points.correctAnswer,callback:function(e){t.$set(t.points,"correctAnswer",e)},expression:"points.correctAnswer"}}),t._v(" "),n("v-checkbox",{staticClass:"mb-8",attrs:{label:t.$t("settings.tabs.gameplay.content.pointsForPlayersIfWrongAnswer.label"),hint:t.$t("settings.tabs.gameplay.content.pointsForPlayersIfWrongAnswer.hint"),"persistent-hint":"",disabled:!t.isGamemaster},on:{change:function(e){return t.updateGameSettings("points_if_wrong_answer",t.points.pointsForPlayersIfWrongAnswer)}},model:{value:t.points.pointsForPlayersIfWrongAnswer,callback:function(e){t.$set(t.points,"pointsForPlayersIfWrongAnswer",e)},expression:"points.pointsForPlayersIfWrongAnswer"}}),t._v(" "),n("v-text-field",{attrs:{type:"number",label:t.$t("settings.tabs.gameplay.content.wrongAnswerPoints.label"),disabled:!t.points.pointsForPlayersIfWrongAnswer||!t.isGamemaster},on:{change:function(e){return t.updateGameSettings("wrong_points",t.points.wrongAnswer)}},model:{value:t.points.wrongAnswer,callback:function(e){t.$set(t.points,"wrongAnswer",e)},expression:"points.wrongAnswer"}})],1)],1)],1),t._v(" "),n("v-tab-item",{staticClass:"mx-10"},[n("v-card",{attrs:{flat:""}},[n("v-card-text",{staticClass:"px-0"},[n("h3",[t._v(t._s(t.$t("settings.tabs.joker.title")))]),t._v(" "),n("v-divider"),t._v(" "),t._l(t.joker,(function(e,a,r){return n("div",{key:a+r.toString()},[n("v-row",[n("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[n("v-checkbox",{attrs:{label:e.label,value:e.value,disabled:!t.isGamemaster},on:{change:function(n){return t.updateGameSettings("joker."+a,e.value)}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})],1),t._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"4"}},[n("v-select",{staticClass:"mt-0",attrs:{items:t.availableJokerCount,disabled:!e.value||!t.isGamemaster},on:{change:function(n){return t.updateGameSettings("joker."+a,e.count)}},model:{value:e.count,callback:function(n){t.$set(e,"count",n)},expression:"item.count"}})],1)],1),t._v(" "),n("v-row",[n("v-col",{staticClass:"pt-0"},[n("div",{staticClass:"v-messages__message"},[t._v(t._s(e.hint))])])],1)],1)}))],2)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,b={name:"pages-settings-index",components:{GameMenu:a.a,SettingsContent:f}},m=Object(i.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("game-menu",{attrs:{"custom-card":"","back-link":"gameshow.menu.index"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n        "+t._s(t.$t("settings.title"))+"\n    ")]},proxy:!0}])},[t._v(" "),n("settings-content")],1)}),[],!1,null,null,null);e.default=m.exports},ZFEL:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return g}));var a=n("L2JU");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={name:"game-menu-playerListing",computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.c)(["getLobbyUser","getPlayerName"]))},o=n("KHd+"),l=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[n("v-slide-y-transition",{attrs:{group:""}},t._l(t.getLobbyUser,(function(e,a){return n("v-chip",{key:"lobby.user."+a,staticClass:"ma-2",attrs:{color:"primary",outlined:t.getPlayerName!==e.text}},[e.isGamemaster?n("i",{staticClass:"fas fa-crown fa-sm pr-2"}):t._e(),t._v("\n            "+t._s(e.text)+"\n        ")])})),1)],1)}),[],!1,null,null,null).exports,c=n("Uoid");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={name:"game-menu",components:{PlayerListing:l},data:function(){return{ApiRoutes:c.a,loading:!0,gameId:null,joinUrl:""}},props:{mainMenu:{type:Boolean,default:!1},customCard:{type:Boolean,default:!1},withCopyLink:{type:Boolean,default:!1},backLink:{type:String,default:null}},beforeMount:function(){this.mainMenu||this.fetchMe()},watch:{isLoading:{handler:function(t,e){!t&&e&&this.initValues()},deep:!0,immediate:!0},mainMenu:{handler:function(t,e){!t&&e&&this.fetchMe()},deep:!0,immediate:!0}},computed:p({},Object(a.c)(["getPlayerLoginSuccess"])),methods:p(p({},Object(a.b)(["fetchSingleGameData","setPlayerName","loginPlayer","lobbyInit","lobbyJoined","lobbyLeft"])),{},{fetchMe:function(){var t=this;axios.get(c.a.v1.auth.me).then((function(e){e.data.success?t.fetchSingleGameData(t.$route.params.id).then((function(){t.setPlayerName(e.data.playerName),t.initValues()})):t.enterPlayerName()})).catch((function(t){Toast.fire({icon:"error",title:t})}))},enterPlayerName:function(){var t=this;Swal.fire({icon:"question",title:"What's your username?",input:"text",allowOutsideClick:!1,preConfirm:function(e){e?e.length>20&&Swal.showValidationMessage(t.$t("validation.max-chars",{num:20})):Swal.showValidationMessage(t.$t("validation.required"))}}).then((function(e){t.loginPlayer(e.value.toString()).then((function(){t.fetchMe()}))}))},initValues:function(){var t=this;this.gameId=this.$route.params.id,this.joinUrl="".concat(document.location.origin,"/").concat(this.gameId),this.loading=!1,Echo.join("Game.".concat(this.$route.params.id,".Lobby")).here((function(e){t.lobbyInit(e)})).joining((function(e){t.lobbyJoined(e)})).leaving((function(e){t.lobbyLeft(e)}))},handleCopySuccess:function(){Toast.fire({icon:"success",title:"Link has been copied!"})},changeRoute:function(t){this.$router.push({name:t,params:{id:this.$route.params.id}})}})},b=Object(o.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"rounded-tl-xl pl-10 deep-purple lighten-1 white--text"},[n("v-card-title",{staticClass:"text-h3 px-0"},[t._t("title",[t._v("\n                !!! Missing title !!!\n            ")]),t._v(" "),n("br")],2)],1),t._v(" "),t.customCard?t._e():n("v-card-text",{staticClass:"mx-auto"},[t.loading?n("div",{staticClass:"text-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"deep-purple lighten-1",size:70,width:7}})],1):n("v-container",{staticClass:"pb-0 px-6"},[t._t("content"),t._v(" "),t.withCopyLink?n("v-container",[n("v-row",[n("v-col",{staticClass:"px-0 pb-0",attrs:{cols:"9"}},[n("v-text-field",{ref:"joinUrl",attrs:{label:t.$t("menu.general.copy.label"),outlined:"",dense:"",disabled:"","aria-disabled":"true"},model:{value:t.joinUrl,callback:function(e){t.joinUrl=e},expression:"joinUrl"}})],1),t._v(" "),n("v-col",{staticClass:"px-0"},[n("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.joinUrl,expression:"joinUrl"}],staticClass:"ml-4",attrs:{color:"info",block:""},on:{success:t.handleCopySuccess}},[n("i",{staticClass:"fas fa-copy pr-2"}),t._v("\n                            "+t._s(t.$t("menu.general.copy.buttonText"))+"\n                        ")])],1)],1),t._v(" "),n("div",[n("v-divider",{staticClass:"pb-3"}),t._v(" "),n("player-listing")],1)],1):t._e()],2)],1),t._v(" "),n("v-fade-transition",{attrs:{mode:"out-in"}},[t.loading&&t.customCard&&!t.mainMenu?n("div",{staticClass:"text-center py-5"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"deep-purple lighten-1",size:70,width:7}})],1):t._t("default")],2),t._v(" "),t.backLink?n("v-card-actions",{staticClass:"grey lighten-2 rounded-br-xl"},[n("v-btn",{attrs:{text:""},on:{click:function(e){return t.changeRoute("gameshow.menu.index")}}},[n("i",{staticClass:"fas fa-2x fa-caret-left pr-3"}),t._v("\n            "+t._s(t.$t("navigation.back"))+"\n        ")])],1):t._e()],1)}),[],!1,null,null,null).exports,m={name:"game-menu-buttons",data:function(){return{gameId:null}},props:{routeName:{type:String,required:!0},text:{type:String,required:!0},icon:{type:String,default:null}},created:function(){this.gameId=this.$route.params.id},methods:{changeRoute:function(t){this.$router.push({name:t,params:{id:this.gameId}})}}},g=Object(o.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{staticClass:"mb-8",attrs:{color:"indigo",elevation:"2",block:"","x-large":"",outlined:""},on:{click:function(e){return t.changeRoute(t.routeName)}}},[t.icon?n("i",{staticClass:"pr-2",class:t.icon}):t._e(),t._v("\n    "+t._s(t.text)+"\n")])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=settings.cf158d774fe84ee97e3b.js.map